/* 
	Turtle skin by Laszlo Molnar
	(C) 2011
*/
var UNDEF="undefined",OBJECT="object",NOLINK="javascript:void(0)";SHOCKWAVE_FLASH="Shockwave Flash";SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash";FLASH_MIME_TYPE="application/x-shockwave-flash";String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.startsWith=function(b){return this.indexOf(b)===0};String.prototype.endsWith=function(b){return this.substring(this.length-b.length)===b};
String.prototype.getExt=function(){var b=this.lastIndexOf(".");return b<=0||b>=this.length-1?"":this.substring(b+1).toLowerCase()};var htmlregex=[[/<br>/,"\n"],[/\&amp;/,"&"],[/\&lt;/,"<"],[/\&gt;/,">"],[/\&(m|n)dash;/,"-"],[/\&apos;/,"'"],[/\&quot;/,'"']];String.prototype.cleanupHTML=function(){for(var b=this,j=htmlregex.length-1;j>=0;j--)b=b.replace(new RegEx(htmlregex[j][0],"gi"),htmlregex[j][1]);return b};String.prototype.stripHTML=function(){return this.replace(/<\/?[^>]+>/gi,"")};
String.prototype.stripQuote=function(){return this.replace(/\"/gi,"&quot;")};String.prototype.appendSep=function(b,j){return(this.length?this+(j||" &middot; "):"")+b};String.prototype.rgb2hex=function(){if(this.charAt(0)==="#")return this;for(var b,j=this.match(/\d+/g),k="",p=0;p<j.length&&p<3;p++)b=parseInt(j[p]).toString(16),k+=(b.length<2?"0":"")+b;return"#"+k};
String.prototype.template=function(b){if(!b)return this;for(var j=this,k=0;k<b.length;k++)j=j.replace(RegExp("\\{"+k+"\\}","gi"),b[k]);return j};Math.minMax=function(b,j,k){return $.isNaN(j)?b:j<b?b:j>k?k:j};var _logel,_logover=!1,_lastlog,_lastcnt=1;
log=function(b){_logover||(_logel||(_logel=$('<div id="log" style="position:fixed;left:0;top:0;width:200px;bottom:0;overflow:auto;padding:10px;background-color:rgba(0,0,0,0.5);color:#fff;font-size:15px;z-index:99999"></div>').hover(function(){_logover=!0},function(){_logover=!1}).appendTo("body")),b===_lastlog?_logel.children(":first").empty().html(_lastlog+" ("+ ++_lastcnt+")"):($('<div style="height:2em;overflow:hidden;">'+b+"</div>").prependTo(_logel),_lastlog=b,_lastcnt=1))};
checkFlash=function(b){var j=navigator,k=[1,0,0],p,b=b?b.split("."):[0,0,0];if(typeof j.plugins!=UNDEF&&typeof j.plugins[SHOCKWAVE_FLASH]==OBJECT){if((p=j.plugins[SHOCKWAVE_FLASH].description)&&!(typeof j.mimeTypes!=UNDEF&&j.mimeTypes[FLASH_MIME_TYPE]&&!j.mimeTypes[FLASH_MIME_TYPE].enabledPlugin))p=p.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),k[0]=parseInt(p.replace(/^(.*)\..*$/,"$1"),10),k[1]=parseInt(p.replace(/^.*\.(.*)\s.*$/,"$1"),10),k[2]=/[a-zA-Z]/.test(p)?parseInt(p.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),
10):0}else if(typeof window.ActiveXObject!=UNDEF)try{var G=new ActiveXObject(SHOCKWAVE_FLASH_AX);if(G&&typeof G.GetVariable!=UNDEF&&(p=G.GetVariable("$version")))p=p.split(" ")[1].split(","),k[0]=parseInt(p[0],10),k[1]=parseInt(p[1],10),k[2]=parseInt(p[2],10)}catch(a){}return k[0]>b[0]||k[0]==b[0]&&k[1]>b[1]||k[0]==b[0]&&k[1]==b[1]&&k[2]>=b[2]};
(function(b){b.fn.logEvents=function(a){var f=(a||"mousedown,mouseup,mouseover,mouseout,mousewheel,dragstart,click,blur,focus,load,unload,reset,submit,change,abort,cut,copy,paste,selection,drag,drop,orientationchange,touchstart,touchmove,touchend,touchcancel,gesturestart,gesturechange,gestureend").split(",");return this.each(function(){for(var a=0;a<f.length;a++)b(this).bind(f[a],function(a){a.target.id!=="log"&&log(a.type+' <span style="padding:0 4px;font-size:0.8em;background-color:#000;border-radius:4px;"><b>'+
a.target.nodeName.toLowerCase()+"</b>"+(a.target.id?":"+a.target.id:"")+"</span>"+(a.relatedTarget?' <span style="padding:0 4px;font-size:0.8em;background-color:#800;border-radius:4px;"><b>'+a.relatedTarget.nodeName.toLowerCase()+"</b>"+(a.relatedTarget.id?":"+a.relatedTarget.id:"")+"</span>":""));return!0})})};b.fn.readData=function(a,f){if(a==null||f==null)return this;var f=f.split(","),c,h=f.length,g;return this.each(function(){for(c=0;c<h;c++)if((g=b(this).data(f[c]))!=null)a[f[c]]=g})};b.extend(b.support,
{orientation:"orientation"in window,touch:"ontouchend"in document,cssTransitions:"WebKitTransitionEvent"in window,cssTable:!b.browser.msie||b.browser.version>=8,flash:checkFlash("9.0.0")});b.extend(jQuery.easing,{easeOutBack:function(a,b,c,h,g,i){i==null&&(i=1.70158);return h*((b=b/g-1)*b*((i+1)*b+i)+1)+c},easeOutCubic:function(a,b,c,h,g){return h*((b=b/g-1)*b*b+1)+c}});b.fn.showin=function(){return this.each(function(){b(this).css("display","inline-block")})};b.fn.getDim=function(){var a=b(this).eq(0),
f={width:a.width(),height:a.height()};if((f.width===0||f.height===0)&&a.css("display")==="none"){var c=a.css("position"),h=a.css("left");a.css({position:"absolute",left:"-10000px",display:"block"});f.width=a.width();f.height=a.height();a.css({display:"none",position:c,left:h})}return f};var j=["DOMMouseScroll","mousewheel"],k=function(a){var f=a||window.event,c=[].slice.call(arguments,1),h=0,g=0,i=0,a=b.event.fix(f);a.type="mousewheel";a.wheelDelta&&(h=a.wheelDelta/120);a.detail&&(h=-a.detail/3);
i=h;f.axis!==void 0&&f.axis===f.HORIZONTAL_AXIS&&(i=0,g=-1*h);f.wheelDeltaY!==void 0&&(i=f.wheelDeltaY/120);f.wheelDeltaX!==void 0&&(g=-1*f.wheelDeltaX/120);c.unshift(a,h,g,i);return b.event.handle.apply(this,c)};b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=j.length;a;)this.addEventListener(j[--a],k,!1);else this.onmousewheel=k},teardown:function(){if(this.removeEventListener)for(var a=j.length;a;)this.removeEventListener(j[--a],k,!1);else this.onmousewheel=null}};
b.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});var p=function(a,b,c){if(arguments.length>1&&/^(string|number|boolean)$/.test(typeof b)){var h=new Date;h.setTime(h.getTime()+(typeof c!=="number"?1:c)*36E5);document.cookie=encodeURIComponent(a)+"="+String(b)+"; expires="+h.toGMTString()+"; path=/";return b}else if(a){a+="=";for(var h=document.cookie.split(";"),g,i=0;i<h.length;i++)if(g=
h[i].trim(),g.indexOf(a)===0)return g=g.substring(a.length),/^(true|yes)$/.test(g)?!0:/^(false|no)$/.test(g)?!1:/^([\d.]+)$/.test(g)?parseFloat(g):g}return null};(function(){function a(a){function c(a){var f=RegExp(b.map(a,encodeURIComponent).join("|"),"ig");return function(a){return a.replace(f,decodeURIComponent)}}a=b.extend({unescape:!1},a||{});f.encoder=function(a){return a===!0?function(a){return a}:typeof a=="string"&&(a=c(a.split("")))||typeof a=="function"?function(b){return a(encodeURIComponent(b))}:
encodeURIComponent}(a.unescape)}var f={put:function(a,b){(b||window).location.hash=this.encoder(a)},get:function(a){a=(a||window).location.hash.replace(/^#/,"");try{return b.browser.mozilla?a:decodeURIComponent(a)}catch(c){return a}},encoder:encodeURIComponent},c={id:"__jQuery_history",init:function(){var a='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';b("body").prepend(a);return this},_document:function(){return b("#"+this.id)[0].contentWindow.document},put:function(a){var b=
this._document();b.open();b.close();f.put(a,b)},get:function(){return f.get(this._document())}},h={base:{callback:void 0,type:void 0,check:function(){},load:function(){},init:function(b,c){a(c);g.callback=b;g._options=c;g._init()},_init:function(){},_options:{}},timer:{_appState:void 0,_init:function(){var a=f.get();g._appState=a;g.callback(a);setInterval(g.check,100)},check:function(){var a=f.get();if(a!=g._appState)g._appState=a,g.callback(a)},load:function(a){if(a!=g._appState)f.put(a),g._appState=
a,g.callback(a)}},iframeTimer:{_appState:void 0,_init:function(){var a=f.get();g._appState=a;c.init().put(a);g.callback(a);setInterval(g.check,100)},check:function(){var a=c.get(),b=f.get();if(b!=a)b==g._appState?(g._appState=a,f.put(a),g.callback(a)):(g._appState=b,c.put(b),g.callback(b))},load:function(a){if(a!=g._appState)f.put(a),c.put(a),g._appState=a,g.callback(a)}},hashchangeEvent:{_init:function(){g.callback(f.get());b(window).bind("hashchange",g.check)},check:function(){g.callback(f.get())},
load:function(a){f.put(a)}}},g=b.extend({},h.base);g.type=b.browser.msie&&(b.browser.version<8||document.documentMode<8)?"iframeTimer":"onhashchange"in window?"hashchangeEvent":"timer";b.extend(g,h[g.type]);b.history=g})();b.fn.addScroll=function(a){a=b.extend({},b.fn.addScroll.defaults,a);return this.each(function(){var f,c=b(this),h=b(this).parent(),g,i,r,l,u,m,n,D,t,F,H,j,k,p,B,C;c.css({position:"absolute",width:h.width-20});h.css({overflow:"hidden"});h.css("position")!=="absolute"&&h.css({position:"relative"});
g=b("<div>",{"class":a.upbtn}).appendTo(h);i=b("<div>",{"class":a.dnbtn}).appendTo(h);r=b("<div>",{"class":a.scbar}).appendTo(h);l=b("<div>").appendTo(r);u=g.add(i).add(r);u.hide();var x=function(){return c.position().top},E=function(a){return Math.round((r.height()-4)*-(a==null?x():a)/m)+2},P=function(){return Math.max(Math.round((r.height()-4)*n/m),a.dragMinSize)},Q=function(b){b==null&&(b=x());g.css({opacity:b?1:a.disabledOpacity});i.css({opacity:b===n-m?a.disabledOpacity:1})},R=function(){m=c.height();
n=h.height();m<=n?(c.css({top:0}),u.hide()):(c.position().top<n-m&&c.css({top:n-m}),l.css({top:E(),height:P()}),u.show(),Q())},z=function(b){clearInterval(D);n>=m||(b=Math.minMax(n-m,b,0),l.stop(!0,!0).animate({top:E(b)},a.speed,a.effect),c.stop(!0,!0).animate({top:b},a.speed,a.effect,function(){Q(b)}))};g.click(function(){z(x()+n);return!1});i.click(function(){z(x()-n);return!1});r.click(function(a){a.pageY<l.offset().top?z(x()+n):a.pageY>l.offset().top+l.height()&&z(x()-n);return!1});a.enableMouseWheel&&
c.mousewheel(function(b,c){c&&z(x()+a.wheelIncr*(c<0?-1:1));return!1});var G=function(a){l.css({top:Math.minMax(1,Math.round(a.pageY-l.data("my")),r.height()-l.height()-1)});c.css({top:-Math.max(Math.round((l.position().top-2)*m/(r.height()-4)),n-m)});Q();return!1},S=function(){b(document).unbind("mousemove",G).unbind("mouseup",S);return!1};l.bind("mousedown",function(a){b(this).data("my",Math.round(a.pageY)-b(this).position().top);b(document).bind("mousemove",G).bind("mouseup",S);return!1});var J=
function(a){return(a.type==="touchmove"||a.type==="touchend"?t.touches[0]:a.touches?a.touches[0]:a).clientY},T=function(){B+=Math.round(p/20);var a=k+B;a>0||a<C?clearInterval(D):(c.css({top:a}),l.css({top:E(),height:P()}),p*=0.8,Math.abs(p)<10&&(p=0,clearInterval(D)))},v=function(a){if(a=J(a)-H)c.data("dragOn",!0),c.css({top:Math.minMax(C,F+a,0)}),l.css({top:E(),height:P()});return!1},y=function(a){k=x();var a=J(a)-H,f=(new Date).getTime()-j;p=1E3*a/f;D=setInterval(T,50);b.support.touch?this.ontouchend=
this.ontouchmove=null:b(document).unbind({mousemove:v,mouseup:y});setTimeout(function(){c.data("dragOn",!1)},20);return Math.abs(a)<4&&f<300},w=function(a){if(n>=m||(a.type==="touchstart"||a.type==="touchmove")&&(!a.touches||a.touches.length>1||c.is(":animated")))return!0;clearInterval(D);t=a;F=x();H=J(a);j=(new Date).getTime();B=0;C=n-m;return b.support.touch?(b(a.target).closest("a").focus(),this.ontouchmove=v,this.ontouchend=y,!0):(b(document).bind({mousemove:v,mouseup:y}),!1)};b.support.touch?
c[0].ontouchstart=w:c.bind("mousedown",w);b(window).resize(function(){clearTimeout(f);f=setTimeout(R,50)});u.add(c).bind("selectstart",function(){return!1});f=setTimeout(R,10);c.attr("role","scroll").data("dragOn",!1).bind("adjust",R);(b.isFunction(a.enableKeyboard)||a.enableKeyboard)&&b(document).keydown(function(c){if(document.activeElement.nodeName==="INPUT"||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard())return!0;switch(c?c.keyCode:window.event.keyCode){case 33:return z(x()+n),!1;case 34:return z(x()-
n),!1}return!0})})};b.fn.addScroll.defaults={upbtn:"scrup",dnbtn:"scrdn",scbar:"scrbar",dragMinSize:10,speed:250,effect:"easeOutBack",disabledOpacity:0.3,wheelIncr:50,enableKeyboard:!0,enableMouseWheel:!0};b.fn.scrollThumbs=function(a){a=b.extend({},b.fn.scrollThumbs.defaults,a);return this.each(function(){var f=b(this),c=b(this).parent(),h,g,i,r,l,u,m,n,D,t=b("<div>",{"class":a.scleft}).insertAfter(c),F=b("<div>",{"class":a.scright}).insertAfter(c),H=function(b){b=b==null?f.position().left:b;t.css({opacity:b<
0?1:a.disabledOpacity});F.css({opacity:c.width()<b+f.width()?1:a.disabledOpacity})},j=function(g){var i=c.width(),h=f.width();if(i&&h&&!(i>=h||b.isNaN(g)))g>0?g=0:g<i-h&&(g=i-h),H(g),f.stop(!0,!1).animate({left:g},a.speed,a.effect)};t.click(function(){j(f.position().left+c.width());return!1});F.click(function(){j(f.position().left-c.width());return!1});f.find("a").bind("setactive",function(){var g=b(this).parent()===f?b(this):b(this).parent(),i=g.position().left,g=g.outerWidth(!0),h=Math.round(g*
a.headRoom),n=f.position().left,m=c.width();f.find("a.active").removeClass("active");b(this).addClass("active");if(!(m>f.width())){if(i>m-g-h-n)n=Math.max(m-g-h-i,m-f.width());else if(i<-n+h)n=-i+h;else return;j(n)}});a.enableMouseWheel&&f.mousewheel(function(a,b){b&&j(f.position().left+c.width()*(b<0?-1:1));return!1});H();var k=function(a){return(a.type==="touchmove"||a.type==="touchend"?h.touches[0]:a.touches?a.touches[0]:a).clientX},p=function(){m+=Math.round(u/20);var a=l+m;a>0||a<n?clearInterval(D):
(f.css({left:a}),u*=0.8,Math.abs(u)<10&&(u=0,clearInterval(D)))},B=function(a){if(a=k(a)-i)f.data("dragOn",!0),f.css({left:Math.minMax(n,g+a,0)});return!1},C=function(a){l=f.position().left;var a=k(a)-i,c=(new Date).getTime()-r;u=1E3*a/c;D=setInterval(p,50);b.support.touch?this.ontouchend=this.ontouchmove=null:b(document).unbind({mousemove:B,mouseup:C});setTimeout(function(){f.data("dragOn",!1)},20);return Math.abs(a)<4&&c<300},x=function(a){if((a.type==="touchstart"||a.type==="touchmove")&&(!a.touches||
a.touches.length>1||f.is(":animated")))return!0;clearInterval(D);h=a;g=f.position().left;i=k(a);r=(new Date).getTime();m=0;n=c.width()-f.width();return b.support.touch?(b(a.target).closest("a").focus(),this.ontouchmove=B,this.ontouchend=C,!0):(b(document).bind({mousemove:B,mouseup:C}),!1)};b.support.touch?f[0].ontouchstart=x:f.bind("mousedown",x);f.attr("role","scroll").data("dragOn",!1);f.add(t).add(F).bind("selectstart",function(a){a.preventDefault();return!1})})};b.fn.scrollThumbs.defaults={scleft:"scleft",
scright:"scright",speed:1500,incr:100,effect:"easeOutBack",headRoom:0.67,disabledOpacity:0.3,enableMouseWheel:!0};b.fn.swipe=function(a,f){return this.each(function(){var c=b(this),h,g=0,i=0,r,l,u,m=function(a){return(a.type==="touchmove"||a.type==="touchend"?h.touches[0]:a.touches?a.touches[0]:a).clientX},n=function(a){c.css({left:m(a)-g+r});return!1},D=function(){return!1},t=function(h){i=c.position().left;h=m(h)-g;b.support.touch?this.ontouchend=this.ontouchmove=null:b(document).unbind("mousemove",
n).unbind("mouseup click",t);Math.abs(h)>40?(u=1E3*h/((new Date).getTime()-l),c.animate({left:i+Math.round(u/2)},500,"easeOutCubic"),h<0?b.isFunction(a)&&a.call():b.isFunction(f)&&f.call()):(c.animate({left:r},200),c.trigger("click"));return!1},F=function(a){if((a.type==="touchstart"||a.type==="touchmove")&&(!a.touches||a.touches.length>1||c.is(":animated")))return!0;clearInterval(void 0);h=a;r=c.position().left;g=m(a);l=(new Date).getTime();return b.support.touch?(this.ontouchmove=n,this.ontouchend=
t,!0):(c.unbind("click"),c.click(D),b(document).bind("mousemove",n).bind("mouseup",t),a.cancelBubble=!0,!1)};b.support.touch?this.ontouchstart=F:c.bind("dragstart",F);c.bind("dragcancel",function(){c.stop(!0,!1).animate({left:r},200);return!1});c.bind("unswipe",function(){b.support.touch?this.ontouchstart=this.ontouchend=this.ontouchmove=null:(b.isFunction(c.noClick)&&c.unbind(D),b.isFunction(c.dragStart)&&c.unbind(F),b(document).unbind("mousemove",n).unbind("mouseup",t))})})};b.fn.alignTo=function(a,
f){f=b.extend({},b.fn.alignTo.defaults,f);return b(this).each(function(){var c=a.offset(),h=b(this).outerWidth(),g=b(this).outerHeight(),i=Math.round(c.left+(a.outerWidth()-h)/2),r=c.top-f.gap-g;r<0&&(r=Math.min(c.top+a.outerHeight()+f.gap,b(window).height()-g));i+h>b(window).width()?i=b(window).width()-g:i<0&&(i=0);b(this).css({position:"absolute",left:i,top:r})})};b.fn.alignTo.defaults={gap:5};b.fn.addHint=function(a,f){var f=b.extend({},b.fn.addHint.defaults,f),c,h=b("#"+f.id),g,i=!1;h.length||
(h=b("<div>",{"class":f.id,id:f.id}).hide().appendTo("body"));var r=function(){i=!1;clearTimeout(g);l()},l=function(){!i&&c&&c.stop(!0,!1).fadeOut(200)},u=function(a){var a=b(a.target),n=a.data("hint");if(n==null&&(a=a.parents([data=c]).eq(0),!a.length||!(n=a.data("hint"))))return!0;c!=null&&(g=clearTimeout(g),c.stop().hide());n&&n.jquery?c=n.addClass(f.id):(c=h,c.html(n).hide());c.hover(function(){g=clearTimeout(g);i=!0;c.stop(!0,!0).css("opacity",1).show()},function(){g=clearTimeout(g);i=!1;l()});
c.alignTo(a).css("opacity",1).fadeIn();b.support.touch&&(g=setTimeout(l,f.stay))};return this.each(function(){var c=a||b(this).attr("title");c&&(b(this).data("hint",c).removeAttr("title"),b(this).bind(b.support.touch?"touchstart":"focus mouseenter",u),b(this).bind("blur mouseleave",r))})};b.fn.addHint.defaults={id:"hint",stay:3E3};b.fn.popupBox=function(a){a=b.extend({},b.fn.popupBox.defaults,a);b("#"+a.id).remove();var f,c=b("<div>",{id:a.id}).appendTo("body"),h=b("<div>",{"class":"panel"}).appendTo(c);
h.css({width:a.width}).append(this);var g=function(){c.fadeOut(250,function(){b(this).remove()})};c.fadeIn(250,function(){f=setTimeout(g,a.length)});h.css({marginTop:Math.max(Math.round((b(window).height()-h.outerHeight())*0.4),0)}).hover(function(){f=clearTimeout(f);b(this).stop(!0,!1).css("opacity",1)},function(){f=setTimeout(g,a.length)});return this};b.fn.popupBox.defaults={id:"modal",width:200,length:500};b.fn.alertBox=function(a,f){b.isArray(a)||(f=a,a=null);f=b.extend({},b.fn.alertBox.defaults,
f);b("#"+f.id).remove();var c=b("<div>",{id:f.id}).appendTo("body"),h=b("<div>",{"class":"panel"}).appendTo(c),g,i;h.append(this);h.append(b("<a>",{"class":"close",href:NOLINK,text:" "}).click(function(){l();return!1}));a&&(g=b("<div>",{"class":"buttons"}).appendTo(h));h.css({width:f.width});var r=function(a){if(document.activeElement.nodeName==="input"||b.isFunction(f.enableKeyboard)&&!f.enableKeyboard())return!0;var c=a?a.keyCode:window.event.keyCode;if(a===27)l();else if(g){var a=g.find("a.active"),
h=i.index(a);switch(c){case 13:case 10:if(b.isFunction(a[0].handler))return a[0].handler.call(),l(),!1;case 39:return u((h+1)%i.length),!1;case 37:return u(h?h-1:i.length-1),!1}}return!0},l=function(){b(document).unbind("keydown",r);c.fadeOut(250,function(){b(this).remove()})},u=function(a){i.each(function(c){b(this).toggleClass("active",c===a)})};if(a&&a.length){for(var m,n=0;n<a.length;n++){n&&g.append(" ");m=b("<a>",{href:NOLINK}).appendTo(g);m.html(a[n].t);if(b.isFunction(a[n].h))m[0].handler=
a[n].h;m.click(function(){this.handler!=null&&this.handler.call();l();return!1})}i=g.children("a");i.last().addClass("active")}(b.isFunction(f.enableKeyboard)||f.enableKeyboard)&&b(document).keydown(r);c.fadeIn(250);h.css({marginTop:Math.max(Math.round((b(window).height()-h.outerHeight())*0.4),0)});return this};b.fn.alertBox.defaults={id:"modal",width:400,enableKeyboard:!0};b.fn.equalHeight=function(){var a,f,c=0,h=0,g;return(g=b(this).length)<2?this:this.each(function(i){a=b(this);a.offset().top===
c?(f=f?f.add(a):a,h=Math.max(h,a.height()),i===g-1&&h&&f.height(h)):(f&&h&&f.height(h),f=a,h=a.height(),c=a.offset().top)})};b.fn.shareIt=function(a){var a=b.extend({},b.fn.shareIt.defaults,a),f=encodeURIComponent(a.useHash?window.location.href:window.location.href.split("#")[0]),c=encodeURIComponent(b("meta[name=title]").attr("content")||b("title").text()),h=encodeURIComponent(a.callTxt);encodeURIComponent(b("link[rel=img_src]").attr("content"));return this.each(function(){var g=b(this);this.nodeName===
"a"&&g.attr("href",NOLINK);var i=b("<div>",{"class":a.id}).hide().appendTo("body");a.facebookLike&&i.append('<div class="likebtn"><iframe src="http://www.facebook.com/plugins/like.php?href='+f+"&amp;layout=button_count&amp;show_faces=false&amp;width=110&amp;action=like&amp;font=arial&amp;colorscheme="+a.likeBtnTheme+'&amp;height=20" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:110px; height:20px;" allowTransparency="true"></iframe></div>');a.twitterTweet&&i.append('<div class="likebtn"><iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/tweet_button.html?url='+
f+"&text="+c+'" style="width:55px; height:20px;"></iframe></div>');a.googlePlus&&gapi&&(i.append('<div class="likebtn" id="plusone"></div>'),gapi.plusone.render("plusone",{size:"medium",count:!0}));a.tumblrBtn&&i.append('<div class="likebtn" id="tumblr"><a href="http://www.tumblr.com/share/photo?source='+f+"&caption="+c+'" title="Share on Tumblr" style="display:inline-block; text-indent:-9999px; overflow:hidden; width:81px; height:20px; background:url(http://platform.tumblr.com/v1/share_1.png) top left no-repeat transparent;">Tumblr</div>');
a.facebook&&i.append('<a href="http://www.facebook.com/sharer.php?u='+f+"&t="+c+'" class="facebook">Facebook</a>');a.twitter&&i.append('<a href="http://twitter.com/home?status='+h+": "+f+'" class="twitter">Twitter</a>');a.digg&&i.append('<a href="http://digg.com/submit?url='+f+'" class="digg">Digg</a>');a.delicious&&i.append('<a href="http://delicious.com/save?url='+f+"&title="+c+'&v=5" class="delicious">Delicious</a>');a.myspace&&i.append('<a href="http://www.myspace.com/index.cfm?fuseaction=postto&t='+
c+"&u="+f+'&l=3" class="myspace">MySpace</a>');a.stumbleupon&&i.append('<a href="http://www.stumbleupon.com/submit?url='+f+"&title="+c+'" class="stumbleupon">StumbleUpon</a>');a.reddit&&i.append('<a href="http://www.reddit.com/submit?url='+f+'" class="reddit">Reddit</a>');a.email&&i.append('<a href="mailto:?subject='+h+"&body="+c+"%0D%0A"+f+'" class="email">Email</a>');i.children("a").attr("target","_blank");g.addHint(i)})};b.fn.shareIt.defaults={id:"shares",useHash:!0,likeBtnTheme:"light",facebookLike:!0,
twitterTweet:!0,googlePlus:!0,tumblrBtn:!0,facebook:!0,twitter:!0,digg:!0,delicious:!0,myspace:!0,stumbleupon:!0,reddit:!0,email:!0,callTxt:"Found this page"};b.fn.addPlayer=function(a){var a=b.extend({},b.fn.addPlayer.defaults,a),f={flashVideo:".flv.3gp.3g2",video:".mp4.mov.f4v",html5Video:".ogv.webm",qtVideo:".qt.mpg.mpeg.mpe",wmVideo:".avi.wmv.asf.asx.wvx.mkv",audio:".mp3.aac.m4a",html5audio:".ogg.wav.ram.rm"},c=0,h=a.resPath?a.resPath+"/":"",g=function(a){var b="",c;for(c in a)b+='<param name="'+
c+'" value="'+a[c]+'">';return b},i=function(a){var c=b(a.target);c&&(b.browser.msie?(c.hide(),function(){if(c.readyState==4){if(c){for(var a in c)typeof c[a]==="function"&&(c[a]=null);c.remove()}}else setTimeout(arguments.callee,10)}()):c.remove())},r=function(f,i,u,m,l,r){var j="media"+c++,k=a.swf===b.fn.addPlayer.defaults.swf?24:0;f.addClass("flplayer").css({width:u,height:m+k});i="netstreambasepath="+encodeURIComponent(window.location.href.split("#")[0])+"&id="+j+"&file="+encodeURIComponent(i)+
"&image="+encodeURIComponent(l)+(r&&r.length?"&folder="+encodeURIComponent(r):"")+"&autostart="+a.auto+"&screencolor="+encodeURIComponent(a.bgcolor)+"&controlbar.position=bottom";j='<object id="'+j+'" name="'+j+'" width="100%" height="100%" bgcolor="'+a.bgcolor+'" tabindex="0" ';b.browser.msie?(j+='classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">',j+=g({movie:h+a.swf})):j+='type="application/x-shockwave-flash" data="'+h+a.swf+'">';j+=g({allowfullscreen:!0,allowscriptaccess:"always",seamlesstabbing:!0,
wmode:"opaque",flashvars:i});return b(j).appendTo(f)},l=function(f,g,h,i){var u="em"+c++;f.addClass("emplayer");return b('<embed class="otherplayer" id="'+u+'" src="'+g+'" autostart="'+a.auto+'" width="'+h+'" height="'+i+'">').appendTo(f)},u=function(f,g,h,i,u,m){if((m=m!==UNDEF&&m)&&!Modernizr.audio||!m&&!Modernizr.video)return l(f,g,h,i);f.addClass("h5player").css({width:h,height:i+j});var r="ht"+c++,j=30,f=b(m?"<audio>":"<video>",{id:r,src:g,width:h,height:i,controls:!0,preload:"auto",poster:u,
autoplay:settungs.auto}).appendTo(f);b.isFunction(a.complete)&&f.bind("ended",a.complete);return f},m=function(f,h,i,m){var u="wm"+c++;f.addClass("wmplayer").css({width:i,height:m+64});i='<object id="'+u+'" width="'+i+'" height="'+(m+64)+'" '+(b.browser.msie?'classid="CLSID:6BF52A52-394A-11D3-B153-00C04F79FAA6">':'type="application/x-ms-wmp" data="'+h+'">');i+=g({URL:h,SendPlayStateChangeEvents:!0,AutoStart:a.auto,StretchToFit:a.fit});b.browser.msie||(i+="<a></a>");el=b(i).appendTo(f);b.isFunction(a.complete)&&
el.bind("playStateChange",function(){a.complete.call(this)});return el};return this.each(function(){var h=b(this),j=null;h.readData(a,"file,folder,width,height,poster");if(a.file){var t;a:{t=a.file.getExt();if(t.length)for(var k in f)if(f[k].indexOf(t)>=0){t=k;break a}t=null}switch(t){case "flashVideo":if(!b.support.flash){h.append(a.flashInstall);break}case "video":if(b.support.flash){j=r(h,a.file,a.width,a.height,a.poster);break}case "html5Video":j=u(h,a.file,a.width,a.height,a.poster);break;case "qtVideo":j=
a.file;t=a.width;k=a.height;var p="qt"+c++;h.addClass("qtplayer").css({width:t,height:k+16});t='<object id="'+p+'" width="'+t+'" height="'+(k+16)+'" '+(b.browser.msie?'classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0">':'type="video/quicktime" data="'+j+'">');t+=g({src:j,autoplay:a.auto,scale:a.fit?"tofit":"1",enablejavascript:!0,postdomevents:!0});h=b(t).appendTo(h);b.isFunction(a.complete)&&h.bind("qt_ended",a.complete);j=
h;break;case "wmVideo":j=m(h,a.file,a.width,a.height);break;case "audio":if(b.support.flash){j=r(h,a.file,a.width,a.height,a.poster,a.folder);break}case "html5audio":j=u(h,a.file,a.width,a.height,a.poster,!0);break;default:j=l(h,a.file,a.width,a.height)}j.bind("remove",i)}})};b.fn.addPlayer.defaults={complete:null,swf:"player.swf",width:640,height:480,bgcolor:"#000000",auto:!1,fit:!0,poster:"",folder:"",flashInstall:'<a href="http://get.adobe.com/flashplayer/">Get Adobe Flash Player!</a>'};b.fn.centerThis=
function(a){var a=b.extend({},b.fn.centerThis.defaults,a),f,c,h,g,i,j,l,u,m,n,k,t,p;return this.each(function(){f=b(this);el=f.find(a.selector);ow=el.data("ow");oh=el.data("oh");if(!ow||!oh){var H=f.is(":visible");f.show();ow=el.width();oh=el.height();f.show(H)}if((g=el.data("bw"))==null)el.data("bw",g=parseInt(el.css("border-top-width")));f.css("position")!=="absolute"&&f.css({position:"relative"});el.css({position:"absolute"});n=a.marginLeft+a.padding;k=a.marginRight+a.padding;t=a.marginTop+a.padding;
p=a.marginBottom+a.padding;c=(f.width()||b("body").width())-2*g-n-k;h=(f.height()||b("body").height())-2*g-t-p;el[0].nodeName==="IMG"&&a.fit&&(i=ow>c||oh>h||a.enlarge?Math.min(c/ow,h/oh):1,ow=Math.round(ow*i),oh=Math.round(oh*i));a.animate&&a.preScale&&a.preScale!==1&&(u=ow*a.preScale,m=oh*a.preScale,el.css({left:Math.round((c-u)/2)+n,top:Math.round((h-m)/2)+t,width:u,height:m}));j=Math.round((c-ow)/2)+n;l=Math.round((h-oh)/2)+t;a.animate?el.animate({top:l,left:j,width:ow,height:oh},a.speed,a.effect,
a.complete):(el.css({top:l,left:j,width:ow,height:oh}),b.isFunction(a.complete)&&a.complete.call(this))})};b.fn.centerThis.defaults={selector:":first",speed:500,fit:!0,enlarge:!0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,padding:0,animate:!1,effect:"swing",complete:null};b.fn.setupShop=function(a){var a=b.extend({},b.fn.setupShop.defaults,a),f;b.fn.addInput=function(a,c,f,j){var l;return this.each(function(){l=b("<input>",{type:f||"text"}).appendTo(b(this));a&&(l.attr("name",a),l.addClass(a));
c&&l.val(c);j&&l.prop(j,j)})};b.fn.addSelect=function(a,c,i){return!a.length?this:this.each(function(){var j=b(this),j=b("<select>").appendTo(j);for(f=0;f<a.length;f++)j.append(b("<option>",{val:a[f].val,text:a[f].key+" ("+c+" "+a[f].val+")"}));b.isFunction(i)&&j.change(i)})};var c=function(a){var a=a.split("::"),b,c=[];for(f=0;f<a.length;f++)b=a[f].split("="),b.length>1&&c.push({key:b[0],val:b[1]});return c};return this.each(function(){var f=b(this),g,i;f.readData(a,"gateway,id,currency,handling,options,file");
if(!(a.id==null||a.options==null||a.file==null)){id=a.gateway=="paypal"?{form:"paypal",seller:"business",currency:"currency_code",title:"item_name",select:"item_number",price:"amount",copies:"add",shipprice:"shipping",handling:"handling_cart"}:{form:"google_checkout",currency:"item_currency_1",title:"item_name_1",select:"item_description_1",price:"item_price_1",copies:"item_quantity_1",shipmethod:"ship_method_name_1",shipprice:"ship_method_price_1",shipcurrency:"ship_method_currency_1"};var j=c(a.options);
a.id=a.id.replace("|","@");var l=function(){var a,b=g.children("select");g.length&&b.length&&(b=b.val().split("+"),q=g.children("[name=copies]").val()||1,(a=g.children("[name=total]"))&&a.val((b[0]*q).toFixed(2)),(a=i.children("[name="+id.price+"]"))&&a.val(b[0]),(a=i.children("[name="+id.copies+"]"))&&a.val(q),b.length>1&&(a=i.children("[name="+id.shipprice+"]"))&&a.val(b[1]),(a=i.children("[name="+id.select+"]"))&&a.val(g.find("option:selected").text()))};g=b("<form>",{name:"shopping",method:"post"}).appendTo(f);
g.addSelect(j,a.currency,l);g.append("x").addInput("copies",1);g.append("=").addInput("total",j[0].val.split("+")[0],"text","readonly");g.children("[name=copies]").css({width:"3em"}).change(l);g.children("[name=total]").css({width:"5em"});g.append(a.currency);a.gateway==="paypal"?(i=b("<form>",{name:id.form,target:a.target,action:"https://www.paypal.com/cgi-bin/webscr/",method:"post"}).appendTo(f),i.addInput("cmd","_cart","hidden"),i.addInput(id.copies,1,"hidden"),i.addInput(id.seller,a.id,"hidden"),
i.addInput(id.price,j[0].val.split("+")[0],"hidden"),i.addInput(id.currency,a.currency,"hidden"),a.shipping!=null&&i.addInput(id.shipprice,parseInt(a.shipping)||0,"hidden"),a.handling!=null&&i.addInput(id.handling,parseInt(a.handling)||0,"hidden"),i.addInput(id.title,a.file,"hidden"),i.addInput(id.select,j[0].key,"hidden"),i.append(b("<input>",{id:"shopAdd",type:"image",name:"submit",src:"https://www.paypal.com/en_US/i/btn/btn_cart_SM.gif",alt:"Add to Cart"})),f=b("<form>",{"class":"view",name:"paypalview",
target:a.target,action:"https://www.paypal.com/cgi-bin/webscr/",method:"post"}).appendTo(f),f.addInput("cmd","_cart","hidden"),f.addInput("display",1,"hidden"),f.addInput(id.seller,a.business,"hidden"),f.append(b("<input>",{id:"shopView",type:"image",name:"submit",src:"https://www.paypal.com/en_US/i/btn/btn_viewcart_SM.gif",alt:"View Cart"}))):a.gateway==="google"&&(l=a.id.match(/(\d+)/)[0],i=b("<form>",{name:id.form,target:a.target,action:"https://checkout.google.com/cws/v2/Merchant/"+l+"/checkoutForm",
method:"post","accept-charset":"utf-8"}).appendTo(f),i.addInput(id.title,a.file,"hidden"),i.addInput(id.select,j[0].key,"hidden"),i.addInput(id.copies,1,"hidden"),i.addInput(id.price,j[0].val.split("+")[0],"hidden"),i.addInput(id.currency,a.currency,"hidden"),a.shipping!=null&&(i.addInput(id.shipmethod,"normal","hidden"),i.addInput(id.shipprice,a.shipping,"hidden"),i.addInput(id.shipcurrency,a.currency,"hidden")),i.addInput("_charset_","","hidden"),i.append(b("<input>",{id:"shopAdd",type:"image",
name:"Google Checkout",alt:"Fast checkout through Google",src:"http://checkout.google.com/buttons/checkout.gif?merchant_id="+l+"&w=160&h=43&style=trans&variant=text&loc=en_US",height:43,width:160})));i.find("input[name=submit]").click(function(){window.open("",a.target,"width=840,height=600,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,directories=no,status=no,copyhistory=no")})}})};b.fn.setupShop.defaults={target:"ShoppingCart",currency:"EUR",gateway:"paypal"};var G=function(a){if(a==null)return null;
return typeof a==="string"?(a=/^(-?[\d.]+),\s?(-?[\d.]+)$/.exec(a),new google.maps.LatLng(a[1],a[2])):new google.maps.LatLng(a[0],a[1])};b.fn.setupMap=function(a){if(google.maps==null)return this;var a=b.extend({},b.fn.setupMap.defaults,a),f=a.markerPath==null?{}:{icon:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(17,24),new google.maps.Point(0,0),new google.maps.Point(8,24)),shadow:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(28,24),new google.maps.Point(17,0),new google.maps.Point(8,
24)),zIndex:9999},c=a.markerPath==null?{}:{icon:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(17,21),new google.maps.Point(45,3),new google.maps.Point(8,24)),shadow:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(28,21),new google.maps.Point(62,3),new google.maps.Point(8,24))};return this.each(function(){var h=b(this),g,i,j,l;h.readData(a,"type,zoom,map,label,resPath,markers");h.data("fresh",!0).bind("adjust",function(){b(this).width()&&b(this).height()&&b(this).data("fresh")&&
(google.maps.event.trigger(j,"resize"),j.setCenter(g),b(this).data("fresh",!1))});if(a.markers&&a.markers.length&&a.curr!=null)g=a.markers[a.curr].map;else if(a.map)g=G(a.map),i=a.label;else return;l&&l.length&&l.remove();l=b("<div>").css({position:"absolute",top:"-9000px",width:h.width(),height:h.height()}).appendTo("body");setTimeout(function(){var u=new google.maps.Map(l[0],{zoom:a.zoom,center:g,mapTypeId:a.type.toLowerCase()});google.maps.event.addListener(u,"maptypeid_changed",function(){b.fn.setupMap.defaults.type=
u.getMapTypeId()});google.maps.event.addListener(u,"zoom_changed",function(){b.fn.setupMap.defaults.zoom=u.getZoom()});if(a.markers&&a.markers.length>1)for(var m,n,k=Math.min(a.curr+a.range,a.markers.length),t=Math.max(a.curr-a.range,0);t<k;t++)if(n=a.markers[t],m={position:n.map,map:u,title:n.label,zIndex:t},t==a.curr)m=new google.maps.Marker(b.extend(m,f));else{if(m=new google.maps.Marker(b.extend(m,c)),jQuery.isFunction(a.click)&&n.link)m.link=n.link,google.maps.event.addListener(m,"click",function(){a.click.call(this)})}else m=
new google.maps.Marker(b.extend({position:g,map:u,title:i},f));l.css({top:0}).appendTo(h);j=u},20)})};b.fn.setupMap.defaults={type:"roadmap",zoom:16,range:30};b.fn.turtleGallery=function(a,f,c){var a=b.extend({},b.fn.turtleGallery.defaults,a),f=b.extend({},b.fn.turtleGallery.texts,f),c=b.extend({},b.fn.turtleGallery.ids,c),h=a.skipIndex?b(a.helpgall.template(f.help)):b(a.help.template(f.help));!a.licensee&&location.protocol.startsWith("http")&&!p("ls")&&setTimeout(function(){b('<div class="skinlogo"><h3>Turtle skin</h3><p>Unlicensed</p></div>').popupBox();
p("ls",!0)},1E3);for(var g="thumbsOn,infoOn,metaOn,mapOn,shopOn,shareOn,printOn,fitImage".split(","),i=function(b,c){location.protocol.startsWith("file")||p(b,c);a[b]=c},j,l=0;l<g.length;l++)if(j=p(g[l]))a[g[l]]=j;b.fn.setupMap.defaults.zoom=a.mapZoom;b.fn.setupMap.defaults.type=a.mapType;b.fn.setupMap.defaults.markerPath=a.markerPath;b.fn.addPlayer.defaults.bgcolor=b("body").css("background-color").rgb2hex();b.fn.addPlayer.defaults.fit=a.videoFit;b.fn.addPlayer.defaults.auto=a.videoAuto;b.fn.centerThis.defaults.fit=
a.fitImage;b.fn.centerThis.defaults.animate=a.fitAnimate;b.fn.centerThis.defaults.padding=a.fitPadding;b.fn.centerThis.defaults.enlarge=!a.fitShrinkonly;b.fn.centerThis.defaults.selector="."+c.main;for(l in a.shares)b.fn.shareIt.defaults[l]=a.shares[l];return this.each(function(){var g=b(this).find("a"),j,l,k,t,p,r,M,N,O,B,C,x,E,P,Q,R,z,ba,S,J,T,v=null,y=null,w=0,I,ga,ha=b(window).width(),ia=b(window).height(),ja=[],va=function(c){if(document.activeElement.nodeName==="INPUT"||b.isFunction(a.enableKeyboard)&&
!a.enableKeyboard()||b("#modal:visible").length)return!0;c=c?c.keyCode:window.event.keyCode;if(c===112)h.alertBox({width:680});else if(j.is(":visible"))switch(c){case 106:case 179:I?K():V();break;case 109:a.infoOn||a.thumbsOn?(ka(),la()):(ma(),na());break;case 107:a.fitImage?oa():pa();break;case 27:W();break;case 36:A(0);break;case 37:X();break;case 39:L();break;case 35:A(g.length-1);break;default:return!0}else switch(c){case 13:case 10:A();break;case 36:w=0;U();break;case 37:w=(w?w:g.length)-1;U();
break;case 39:w=(w+1)%g.length;U();break;case 35:w=g.length-1;U();break;default:return!0}return!1},W=function(){var c=b("[role=main]");if(j.is(":visible"))K(),a.skipIndex?window.location.href=a.uplink||"../":(c.length&&c.is(":hidden")&&(c.children().andSelf().css({visibility:"visible",display:"block"}),c.find(".folders>ul>li").equalHeight(),c.find("[role=scroll]").trigger("adjust")),j.fadeOut(a.speed),a.hash!=="no"&&b.history.load(""));c.find("[role=scroll]").data("dragOn",!1)},wa=function(a){var b;
if(a==null)b=w;else if(typeof a==="number")b=Math.minMax(0,a,g.length);else if((b=g.index(a))<0)b=ba.index(a);return b},xa=function(a){var b,c;for(b=0;b<g.length;b++)if((c=g.eq(b).attr("href"))&&c.substring(c.lastIndexOf("/")+1)===a)return b;return-1},U=function(){g.filter("."+c.active).removeClass(c.active);g.eq(w).addClass(c.active);ba.eq(w).trigger("setactive")},X=function(){K();w?A(w-1):a.slideshowLoop?A(g.length-1):v.find("img."+c.main).trigger("dragcancel")},L=function(){if(w<g.length-1)ca(),
A(w+1);else if(a.slideshowLoop)ca(),A(0);else if(a.askAtLast){K();v.find("img."+c.main).trigger("dragcancel");var i=Array({t:f.startOver,h:function(){A(0)}});a.uplink&&i.push({t:a.level>0?f.upOneLevel:f.backToHome,h:function(){window.location.href=a.uplink||"../"}});a.skipIndex||i.push({t:f.backToIndex,h:function(){W()}});b("<h4>"+f.atLastPage+"</h4><p>"+f.atLastPageQuestion+"</p>").alertBox(i)}},ca=function(){I&&(clearInterval(I),I=setInterval(L,a.slideshowDelay))},V=function(){r.hide();M.showin();
I=setInterval(L,a.slideshowDelay)},K=function(){M.hide();r.showin();I=clearInterval(I)},qa=function(){J||(t.stop(!0,!1).css({opacity:0.7}).fadeIn(500,function(){b.browser.msie&&t.css("filter","")}),T=setTimeout(function(){da()},3E3))},da=function(){J?T=setTimeout(function(){da()},1E3):(T=clearTimeout(T),t.fadeOut(1E3))},ka=function(){a.infoOn&&(N.hide(),O.showin(),p.animate({bottom:-p.outerHeight()},500,function(){p.hide()}),i("infoOn",!1))},ma=function(){a.infoOn||(O.hide(),N.showin(),p.is(":hidden")&&
p.show().css({bottom:-p.outerHeight()}),p.animate({bottom:0},500,function(){p.children(c.map).trigger("adjust")}),i("infoOn",!0))},la=function(){a.thumbsOn&&(B.hide(),C.showin(),k.animate({top:-z.outerHeight()-10},500),v&&a.fitFreespace&&v.centerThis({fit:a.fitImage,marginTop:0}),i("thumbsOn",!1))},na=function(){a.thumbsOn||(C.hide(),B.showin(),k.animate({top:0},500),v&&a.fitFreespace&&v.centerThis({fit:a.fitImage,marginTop:z.outerHeight()}),i("thumbsOn",!0))},Y=function(){return a.fitFreespace&&
k.position().top>=0?z.outerHeight()||0:0},oa=function(){x.hide();E.showin();v.centerThis({fit:!1,marginTop:Y()});i("fitImage",!1)},pa=function(){E.hide();x.showin();v.centerThis({fit:!0,marginTop:Y()});i("fitImage",!0)},ra=function(a){if(!(a<0||a>=g.length)){var f=g.eq(a).children("img").eq(0);!f.data(c.isvideo)&&!f.data(c.isother)&&!f.data("cached")&&(s=f.data(c.src))&&b("<img>").load(function(){f.data("cached",!0)}).attr({src:s})}},A=function(i){j.is(":hidden")&&j.fadeIn(a.speed);i=wa(i);if(!(i===
w&&v)){var h,k=g.eq(i),p,r,k=k.children("img").eq(0);if(k.length){v&&(y&&y.length&&(y.stop().remove(),y.trigger("remove")),y=v,y.css({zIndex:0}),y.find("."+c.main).trigger("unswipe").unbind("touchstart"),y.unmousewheel());(h=j.children("."+c.img).not(v)).length&&h.stop().remove();var t;v=b("<div>",{"class":c.img}).css({zIndex:1,display:"none"}).appendTo(j);l.fadeIn();w=i;U();if(k.data(c.isother)||!(p=k.data(c.src)))r=k.clone(),h=b("<div>",{"class":c.main+" "+c.other}),h.append(b("<a>",{href:k.data(c.link),
target:"_blank"})),h.append(b("<p>",{text:f.clickToOpen})),h.children("a:first").append(r),ea(h);else if(k.data(c.isvideo)||k.data(c.isaudio)){var x=I;x&&K();if(k.data(c.isvideo)){p=j.width()-40;var sa=j.height()-40;h=k.data(c.width);t=k.data(c.height);if(h>p||t>sa)p=Math.min(p/h,sa/t),h*=p,t*=p}else h=Math.max(280,k.attr("width")||0),t=Math.max(128,k.attr("height")||0);p=b("<div>",{"class":c.main+" "+c.other}).css({width:h,height:t});el=p.addPlayer({complete:function(){x&&(L(),V())},file:k.data(c.link),
resPath:a.resPath,poster:k.attr("src"),auto:a.videoAuto,fit:a.videoFit,width:h,height:t});p.data("media",el);ea(p)}else r=b(new Image),h=k.data(c.width),t=k.data(c.height),r.addClass(c.main).load(function(){k.data("cached",!0);ea(r)}).attr({src:p,width:h||"auto",height:t||"auto"}).data({ow:h,oh:t});ya(k,i)}}},ea=function(f){l.stop(!0,!1).fadeOut(100);if(y){var h=y;y.stop(!0,!1).fadeOut(a.speed/2,function(){h.remove();h.trigger("remove")});y=null}b.support.touch?f.bind("touchstart",function(){qa()}):
(f.hasClass(c.other)||f.click(function(){L()}),a.enableMouseWheel&&setTimeout(function(){v.mousewheel(function(a,b){b>0?X():L();return!1})},a.speed),a.rightClickProtect&&f.bind("contextmenu",function(a){a.preventDefault();return!1}));f.swipe(function(){b(this).trigger("unswipe");L()},function(){b(this).trigger("unswipe");X()});v.children().not("."+c.bottom).remove();v.append(f);v.css("opacity",0).centerThis({preScale:a.preScale,fit:a.fitImage,marginTop:Y()}).fadeTo(a.speed,1,function(){b.browser.msie&&
v.css("filter","")});ra(w+1);ra(w-1);a.hash==="number"?b.history.load(w+1):a.hash==="fileName"&&(f=g.eq(w).attr("href"))&&b.history.load(f.substr(f.lastIndexOf("/")+1))},ya=function(h,j){p=b("<div>",{"class":c.bottom});var k=b("<div>",{"class":c.cont}).appendTo(p),l=b("<nav>").appendTo(k),m;k.append('<div class="nr"><strong>'+(j+1)+"</strong> / "+g.length+"</div>");(m=h.data(c.caption))&&k.append(m);for(var n,t,r,w=[c.meta,c.map,c.shop,c.share,c.print,c.comment],x=0;x<w.length;x++)r=w[x],h.data(r)!=
null&&(t=b("<div>",{"class":c.panel+" "+c[r]}).data("rel",r).appendTo(k),t.append(b("<div>",{"class":c.icon})),n=b("<a>",{href:NOLINK,"class":r+"-"+c.icon,text:" "}).appendTo(l),n.data("rel",r).addHint(f[r+"Btn"]||r),n.click(function(){var a=b(this).data("rel"),f=k.children("."+a);o=f.is(":hidden");b(this).toggleClass(c.active,o);a===c.map?f.slideToggle("fast",function(){b(this).children("."+c.mapcont).trigger("adjust")}):f.slideToggle("fast");i(a+"On",o)}));if(m=h.data(c.link))n=b("<a>",{href:m,
"class":c.link+"-"+c.icon,target:"_blank",text:" "}).appendTo(l),n.addHint(h.data(c.isoriginal)?f.original:f.hiRes);v.append(p);k.children("."+c.panel).each(function(){t=b(this);if((r=t.data("rel"))&&(m=h.data(r))!=null){if(r===c.map){var f=b("<div>",{"class":c.mapcont}).appendTo(t);a.mapAll?f.setupMap({click:function(){A(this.link)},markers:ja,curr:parseInt(h.data("mapid"))}):f.setupMap({map:m,label:h.data(c.caption).stripHTML()})}else r===c.shop?t.addClass("clearfix").setupShop({file:h.attr("src").replace("thumbs/",
""),gateway:a.shopGateway,id:a.shopId,currency:a.shopCurrency,handling:a.shopHandling,options:m}):t.append(m);a[r+"On"]?l.children("a."+r+"-icon").addClass(c.active):t.hide()}});l.html().length||l.remove();a.infoOn||p.hide()};if(g.length){(function(){if(a.header!=null){var g=b(a.header);if(g.length){var i=b("<div>",{"class":c.startBtn,text:" "}).appendTo(g),j=b("<div>",{"class":c.startTxt,text:f.startSlideshow}).appendTo(g);i.mouseenter(function(){j.stop(!0,!1).css({opacity:1}).hide().fadeIn(250)}).mouseleave(function(){j.stop(!0,
!1).fadeOut(500)}).click(function(){A();V();return!1});i=g.find("."+c.parent+">a");if(i.length)a.uplink=i.attr("href");g.find("."+c.help+">a").click(function(){h.alertBox({width:680})})}}})();j=b("<div>",{"class":c.gallery}).appendTo("body");l=b("<div>",{"class":c.wait}).appendTo(j);k=b("<div>",{"class":c.navigation}).appendTo(j);z=function(h){var i,j,k,l,m=0;e=b("<div>",{"class":c.scrollbox}).appendTo(h);tc=b("<div>",{"class":"wrap"}).appendTo(e);re=RegExp("^"+a.slides+"\\/");nl='<span class="'+
c.newItem+'">'+f.newItem+"</span>";d=Math.round((new Date).getTime()/864E5);tc=b("<ul>",{"class":c.cont}).appendTo(tc);g.each(function(f){h=b(this);k=h.find("img").eq(0);l=h.attr("href");k.length&&l&&(i=b("<a>",{href:NOLINK}).appendTo(b("<li>").appendTo(tc)),j=b("<img>").appendTo(i),k.data(c.src,l),k.attr("src").endsWith("/"+a.loadImg)?(l=l.replace(re,a.thumbs+"/"),k.add(j).attr("src",l)):j.attr("src",k.attr("src")),h.add(i).addHint(h.attr("title")),a.markNewDays&&d-parseInt(k.data(c.modified)||0)<=
a.markNewDays&&h.add(i).append(nl),h.click(function(){if(b(this).parents("[role=scroll]").data("dragOn")===!0)return!1;!b(this).hasClass(c.active)&&v&&v.length&&(v.stop().remove(),v.trigger("remove"));A(g.eq(f));return!1}),i.click(function(){if(b(this).parents("[role=scroll]").data("dragOn")===!0)return!1;b(this).hasClass(c.active)||A(g.eq(f));b(this).trigger("active");return!1}),m+=i.outerWidth(!0))});tc.width(m).scrollThumbs({enableMouseWheel:a.enableMouseWheel});return e}(k);ba=z.find(".cont a");
t=function(g){g=b("<nav>",{"class":"controls clearfix"}).appendTo(g);P=b("<a>",{"class":c.prev,title:f.previousPicture}).appendTo(g);P.click(function(){K();X();return!1});Q=b("<a>",{"class":c.up,title:a.skipIndex?f.upOneLevel:f.backToIndex}).appendTo(g);Q.click(function(){K();W();return!1});x=b("<a>",{"class":c.noresize,title:f.oneToOneSize}).appendTo(g);x.click(function(){oa();return!1});E=b("<a>",{"class":c.resize,title:f.fitToScreen}).appendTo(g);E.click(function(){pa();return!1});a.fitImage?(E.hide(),
x.showin()):(x.hide(),E.showin());N=b("<a>",{"class":c.hideInfo,title:f.hideInfo}).appendTo(g);N.click(function(){ka();return!1});O=b("<a>",{"class":c.showInfo,title:f.showInfo}).appendTo(g);O.click(function(){ma();return!1});a.infoOn?(O.hide(),N.showin()):(N.hide(),O.showin());B=b("<a>",{"class":c.hideThumbs,title:f.hideThumbs}).appendTo(g);B.click(function(){la();return!1});C=b("<a>",{"class":c.showThumbs,title:f.showThumbs}).appendTo(g);C.click(function(){na();return!1});a.thumbsOn?(C.hide(),B.showin()):
(B.hide(),C.showin());r=b("<a>",{"class":c.play,title:f.startAutoplay}).appendTo(g);r.click(function(){V();return!1});M=b("<a>",{"class":c.pause,title:f.stopAutoplay}).appendTo(g);M.click(function(){K();return!1});a.slideshowAuto?(r.hide(),M.showin()):(M.hide(),r.showin());R=b("<a>",{"class":c.next,title:f.nextPicture}).appendTo(g);R.click(function(){ca();L();return!1});var h=0;g.children().each(function(){b(this).css("display")!=="none"&&(h+=b(this).outerWidth())});g.width(h);g.children("a").addHint();
return g}(k);a.thumbsOn||k.css("top",-z.outerHeight()-10);z.mouseenter(function(){da();S=!0}).mouseleave(function(){S=!1});t.mouseenter(function(){J=!0;b(this).stop(!0,!1).fadeTo(200,1)}).mouseleave(function(){J=!1;b(this).stop(!0,!1).fadeTo(200,0.7)});var ta=0,ua=0;b.support.touch||j.mousemove(function(a){if(!S&&(ta-a.clientY||ua-a.clientX))qa(),ua=a.clientX,ta=a.clientY});if(a.mapAll){var Z,aa,fa;g.each(function(a){Z=b(this).find("img:first");if(Z.length&&(aa=Z.data("map"))&&(aa=G(aa)))fa=Z.data(c.caption),
ja.push({map:aa,label:a+1+(fa?": "+fa.stripHTML():""),link:b(this)})})}!b.support.touch&&(b.isFunction(a.enableKeyboard)||a.enableKeyboard)&&b(document).keydown(va);a.hash&&a.hash!=="no"&&b.history.init(function(c){c&&c.length?(c=a.hash==="number"?(parseInt(c)||1)-1:xa(c),A(c),a.slideshowAuto=!1):(W(),b.browser.msie&&setTimeout(function(){b("[role=main]").show();b(".folders>ul>li").equalHeight();b("[role=scroll]").trigger("adjust")},10))});U(w);a.slideshowAuto?(A(w),V()):a.skipIndex&&A(w);b(window).resize(function(){clearTimeout(ga);
ga=setTimeout(function(){var c=b(window).width(),f=b(window).height();if(c!==ha||f!==ia)v&&v.centerThis({fit:a.fitImage,marginTop:Y()}),ha=c,ia=f},100)})}})};b.fn.turtleGallery.defaults={hash:"fileName",resPath:"",relPath:"",level:0,skipIndex:!1,speed:600,preScale:0.96,slideshowDelay:3E3,slideshowLoop:!1,slideshowAuto:!1,newDays:30,askAtLast:!0,infoOn:!0,thumbsOn:!1,fitImage:!0,fitAnimate:!0,fitShrinkonly:!0,fitFreespace:!0,fitPadding:15,borderWidth:10,rightClickProtect:!1,metaOn:!1,mapOn:!1,shopOn:!1,
shareOn:!1,printOn:!1,enableKeyboard:!0,enableMouseWheel:!0,numberLinks:!1,videoAuto:!0,videoFit:!0,videoWidth:640,videoHeight:480,controlbarHeight:24,help:'<h2>{0}</h2><ul class="help index"><li><span>1</span>{1}</li><li><span>2</span>{2}</li><li><span>3</span>{3}</li></ul><hr><ul class="help gall"><li><span>1</span>{4}</li><li><span>2</span>{5}</li><li><span>3</span>{6}</li><li><span>4</span>{7}</li><li><span>5</span>{8}</li><li><span>6</span>{9}</li><li><span>7</span>{10}</li></ul><p>{11}</p>',
helpgall:'<h2>{0}</h2><ul class="help gall"><li><span>1</span>{4}</li><li><span>2</span>{2}</li><li><span>3</span>{6}</li><li><span>4</span>{7}</li><li><span>5</span>{8}</li><li><span>6</span>{9}</li><li><span>7</span>{10}</li></ul><p>{11}</p>'};b.fn.turtleGallery.texts={startSlideshow:"Start slideshow",close:"Close",atLastPage:"At last page",atLastPageQuestion:"Where to go next?",startOver:"Start over",backToHome:"Back to home",stop:"Stop",upOneLevel:"Up one level",backToIndex:"Back to index page",
previousPicture:"Previous picture",nextPicture:"Next picture",oneToOneSize:"1:1 size",fitToScreen:"Fit to screen",showInfo:"Show caption / info",hideInfo:"Hide caption / info",showThumbs:"Show thumbnails",hideThumbs:"Hide thumbnails",startAutoplay:"Start autoplay",stopAutoplay:"Stop autoplay",closeWindow:"Close window",clickToOpen:"Click to open this document with the associated viewer",download:"Download",original:"Original",hiRes:"Hi res.",metaBtn:"Photo data",metaLabel:"Display photograpic (Exif/Iptc) data",
mapBtn:"Map",mapLabel:"Show the photo location on map",shopBtn:"Buy",shopLabel:"Show options to buy this item",shareBtn:"Share",shareLabel:"Share this photo over social sites",help:"Using Turtle gallery,Up one level <em>Up arrow</em>,Share album over social sites,Start slideshow <em>Numpad *</em>,Previous image <em>Left arrow</em>,Back to index page <em>Esc</em>,Toggle zoom (fit/1:1) <em>Numpad +</em>,Toggle info window <em>Numpad -</em>,Toggle thumbnail scoller,Start / Stop slideshow <em>Numpad *</em>,Next image <em>Right arrow</em>,Swipe for previous / next image".split(",")};
b.fn.turtleGallery.ids={gallery:"gallery",navigation:"navigation",scrollbox:"scrollbox",active:"active",parent:"parent",bottom:"bottom",img:"img",main:"main",video:"video",audio:"audio",other:"other",wait:"wait",cont:"cont",panel:"panel",icon:"icon",caption:"caption",meta:"meta",map:"map",mapcont:"mapcont",shop:"shop",share:"share",print:"print",comment:"comment",link:"link",isoriginal:"isoriginal",width:"width",height:"height",src:"src",isvideo:"isvideo",isaudio:"isaudio",isother:"isother",modified:"modified",
startBtn:"startbtn",startTxt:"starttxt",prev:"prev",next:"next",up:"up",noresize:"noresize",resize:"resize",hideInfo:"hideinfo",showInfo:"showinfo",hideThumbs:"hidethumbs",showThumbs:"showthumbs",play:"play",pause:"pause",help:"helpbtn",newItem:"newlabel",showHint:"showhint"}})(jQuery);
